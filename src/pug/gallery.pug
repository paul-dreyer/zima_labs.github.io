html(lang="en")
    head
        meta(charset="utf-8")
        meta(name="viewport", content="width=device-width, initial-scale=1, shrink-to-fit=no")
        link(rel="preconnect", href="https://fonts.gstatic.com")
        link(href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap", rel="stylesheet")
        link(href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@400,300,500&display=swap", rel="stylesheet")
        link(rel="stylesheet", href="css/tailwind/tailwind.min.css")
        link(rel="icon", type="image/png", sizes="32x32", href="fav-icon.png")
        script(src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js", defer="defer")
    
    body(class="antialiased bg-body text-body font-body")
        div(class="")
            include components/_navbar.pug

            section(class="py-24 overflow-hidden")
                div(class="container px-4 mx-auto")
                    
                    div(class="mb-20 md:max-w-2xl text-center mx-auto")
                        h2(class="font-heading text-7xl lg:text-8xl text-white tracking-7xl lg:tracking-8xl") Dataset Gallery
                    
                    //- Data blocks
                    div(class="flex flex-wrap -m-4")

                        div(class="w-full md:w-1/2 lg:w-1/3 p-4 mb-8 lg:mb-0")
                            //- Wrap image in a clickable div with shared class and data attribute
                            div.view-more-btn(data-project="wire-harness",
                                class="mb-4 overflow-hidden rounded-3xl cursor-pointer group")
                                img(class="w-full transform group-hover:scale-125 transition duration-1000",
                                    src="template-assets/images/data_gallery/wire_harness/set_a_image.png", alt="")

                            a(class="group block", href="#")
                                h3(class="font-heading text-3xl text-white tracking-3xl") Wire Harness Assembly
                            p(class="mb-2 text-white text-opacity-60") Wire harnesses showing fully-seated, soft-seated, and disconnected configurations
                            div(class="flex flex-wrap")
                                div(class="w-auto mr-2")
                                    button.view-more-btn(
                                        type="button",
                                        data-project="wire-harness",
                                        class="py-3.5 px-6 text-sm text-white hover:text-black font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 hover:bg-green-400 rounded-full transition duration-300"
                                    ) View Data Overlays
                                div(class="w-auto mr-2")
                                    button.download-btn(
                                        type="button",
                                        data-project="wire-harness",
                                        class="py-3.5 px-6 text-sm text-gray-600 font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 rounded-full"
                                    ) Download Sample
                        
          

                        div(class="w-full md:w-1/2 lg:w-1/3 p-4 mb-8 lg:mb-0")
                            //- Wrap image in a clickable div with shared class and data attribute
                            div.view-more-btn(data-project="pipe-fittings",
                                class="mb-4 overflow-hidden rounded-3xl cursor-pointer group")
                                img(class="w-full transform group-hover:scale-125 transition duration-1000",
                                    src="template-assets/images/data_types/contour_thumbnail.png", alt="")

                            a(class="group block", href="#")
                                h3(class="font-heading text-3xl text-white tracking-3xl") Pipe Fittings
                            p(class="mb-6 text-white text-opacity-60") Multiple PVC pipe parts in various settings

                            div(class="flex flex-wrap")
                                div(class="w-auto mr-2")
                                    button.view-more-btn(
                                        type="button",
                                        data-project="pipe-fittings",
                                        class="py-3.5 px-6 text-sm text-white hover:text-black font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 hover:bg-green-400 rounded-full transition duration-300"
                                    ) View Data Overlays
                                div(class="w-auto mr-2")
                                    button.download-btn(
                                        type="button",
                                        data-project="pipe-fittings",
                                        class="py-3.5 px-6 text-sm text-gray-600 font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 rounded-full"
                                    ) Download Sample
                    
                        div(class="w-full md:w-1/2 lg:w-1/3 p-4 mb-8 lg:mb-0")
                            //- Wrap image in a clickable div with shared class and data attribute
                            div.view-more-btn(data-project="3d-printing",
                                                class="mb-4 overflow-hidden rounded-3xl cursor-pointer group")
                                img(class="w-full transform group-hover:scale-125 transition duration-1000",
                                    src="template-assets/images/data_gallery/3D_print/3D_print_purple_large.png", alt="")

                            a(class="group block", href="#")
                                h3(class="font-heading text-3xl text-white tracking-3xl") 3D Printing
                            p(class="mb-6 text-white text-opacity-60") Various parts with a simulated FDM printed texturing

                            div(class="flex flex-wrap")
                                div(class="w-auto mr-2")
                                    button.view-more-btn(
                                        type="button",
                                        data-project="3d-printing",
                                        class="py-3.5 px-6 text-sm text-white hover:text-black font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 hover:bg-green-400 rounded-full transition duration-300"
                                    ) View Data Overlays
                                div(class="w-auto mr-2")
                                    button.download-btn(
                                        type="button",
                                        data-project="3d-printing",
                                        class="py-3.5 px-6 text-sm text-gray-600 font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 rounded-full"
                                    ) Download Sample

                        div(class="w-full md:w-1/2 lg:w-1/3 p-4 mb-8 lg:mb-0")
                            //- Wrap image in a clickable div with shared class and data attribute
                            div.view-more-btn(data-project="mars-rover",
                                                class="mb-4 overflow-hidden rounded-3xl cursor-pointer group")
                                img(class="w-full transform group-hover:scale-125 transition duration-1000",
                                    src="template-assets/images/data_types/mars_bounding_box_thumbnail.png", alt="")

                            a(class="group block", href="#")
                                h3(class="font-heading text-3xl text-white tracking-3xl") Mars Rover
                            p(class="mb-2 text-white text-opacity-60") The perserverence rover in simulated terrain

                            div(class="flex flex-wrap")
                                div(class="w-auto mr-2")
                                    button.view-more-btn(
                                        type="button",
                                        data-project="mars-rover",
                                        class="py-3.5 px-6 text-sm text-white hover:text-black font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 hover:bg-green-400 rounded-full transition duration-300"
                                    ) View Data Overlays
                                div(class="w-auto mr-2")
                                    button.download-btn(
                                        type="button",
                                        data-project="mars-rover",
                                        class="py-3.5 px-6 text-sm text-gray-600 font-medium tracking-tighter bg-blueGray-900 bg-opacity-30 rounded-full"
                                    ) Download Sample

                
            //- Page bottom
            include components/_page_bottom.pug

        //- Image Modal (initially hidden)
        div#gallery-modal(class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex items-center justify-center")

            //- Modal Container
            div(class="relative w-full max-w-5xl max-h-[90vh] p-6 bg-black bg-opacity-50 rounded-lg overflow-y-auto flex flex-col items-center")

                //- Close Button
                button#close-gallery(class="absolute top-4 right-4 text-white text-5xl font-bold hover:text-gray-300") &times;

                //- Modal Content
                div(class="flex flex-col items-center w-full gap-4")

                    //- Title
                    h2#gallery-title(class="text-white text-4xl sm:text-5xl text-center")

                    //- Image Viewer (tight sizing)
                    div(class="relative w-full flex items-center justify-center")
                        img#gallery-image(
                            class="max-h-[40vh] object-contain transition duration-300 rounded-lg"
                            src=""
                            alt="Gallery image"
                        )
                    
                    //- Dot Indicators
                    div#dot-indicators(class="flex justify-center mt-2 space-x-2")

                    //- Mode Buttons (tight margin wrapping)
                    div(class="flex flex-wrap justify-center gap-4")
                        each mode in ['boundingbox', 'contour', 'segmentation', 'pose']
                            button(
                                class="mode-btn px-4 py-2 w-32 text-white text-center border-2 border-white rounded-full hover:bg-green-300 hover:text-black transition duration-200"
                                data-mode=mode
                            )= mode.charAt(0).toUpperCase() + mode.slice(1)

                    //- Navigation Arrows
                    div(class="flex justify-center gap-12 mt-2")
                        button#prev-btn(class="text-white text-2xl flex items-center gap-2 hover:text-green-400")
                            span &larr;
                            span Prev.
                        button#next-btn(class="text-white text-2xl flex items-center gap-2 hover:text-green-400")
                            span Next
                            span &rarr;


script.
    const projectImages = {
        'mars-rover': {
            title: 'Mars Rover',
            boundingbox: [
            'template-assets/images/data_types/mars_bounding_box_thumbnail.png',
            'template-assets/images/data_types/contour_thumbnail.png'
            ],
            segmentation: [
            'template-assets/images/data_types/contour_thumbnail.png',
            'template-assets/images/data_types/mars_bounding_box_thumbnail.png'
            ],
            contour: [],
            pose: []
            },
        'pipe-fittings': {
            title: 'Pipe Fittings',
            boundingbox: [
            'template-assets/images/data_gallery/pipe_fittings/set_a_bbox_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_b_bbox_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_c_bbox_overlay.png',
            ],
            segmentation: [
            'template-assets/images/data_gallery/pipe_fittings/set_a_segmentation_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_b_segmentation_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_c_segmentation_overlay.png',
            ],
            contour: [
            'template-assets/images/data_gallery/pipe_fittings/set_a_contour_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_b_contour_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_c_contour_overlay.png',
            ],
            pose: [
            'template-assets/images/data_gallery/pipe_fittings/set_a_pose_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_b_pose_overlay.png',
            'template-assets/images/data_gallery/pipe_fittings/set_c_pose_overlay.png',
            ]
            },
        'wire-harness': {
            title: 'Wire Harness Assembly',
            boundingbox: [
            'template-assets/images/data_gallery/wire_harness/set_a_bbox_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_b_bbox_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_c_bbox_overlay.png',
            ],
            segmentation: [
            'template-assets/images/data_gallery/wire_harness/set_a_segmentation_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_b_segmentation_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_c_segmentation_overlay.png',
            ],
            contour: [
            'template-assets/images/data_gallery/wire_harness/set_a_contour_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_b_contour_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_c_contour_overlay.png',
            ],
            pose: [
            'template-assets/images/data_gallery/wire_harness/set_a_pose_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_b_pose_overlay.png',
            'template-assets/images/data_gallery/wire_harness/set_c_pose_overlay.png',
            ]
            },
        '3d-printing': {
            title: '3D Printing',
            boundingbox: [
            'template-assets/images/data_gallery/3D_print/set_a_bbox_overlay.png',
            'template-assets/images/data_gallery/3D_print/set_b_bbox_overlay.png',
            ],
            segmentation: [
            'template-assets/images/data_gallery/3D_print/set_a_segmentation_overlay.png',
            'template-assets/images/data_gallery/3D_print/set_b_segmentation_overlay.png',
            ],
            contour: [
            'template-assets/images/data_gallery/3D_print/set_a_contour_overlay.png',
            'template-assets/images/data_gallery/3D_print/set_b_contour_overlay.png',
            ],
            pose: [
            'template-assets/images/data_gallery/3D_print/set_a_pose_overlay.png',
            'template-assets/images/data_gallery/3D_print/set_b_pose_overlay.png',
            ]
            },
        };

    // Modal state
    let currentProject = null;
    let currentDataType = 'boundingbox';
    let allImages = [];
    let currentIndex = 0;

    // DOM Elements
    const modal = document.getElementById('gallery-modal');
    const modalImage = document.getElementById('gallery-image');
    const modalTitle = document.getElementById('gallery-title');

    // Helpers
    function openModal() {
        modal.classList.remove('hidden');
    }

    function closeModal() {
        modal.classList.add('hidden');
    }

    function updateGalleryImage() {
        modalImage.src = allImages[currentIndex];
    }

    // View More buttons
    document.querySelectorAll('.view-more-btn').forEach(button => {
        button.addEventListener('click', () => {
            const projectKey = button.getAttribute('data-project');
            const project = projectImages[projectKey];

            if (!project) return;

            currentProject = projectKey;
            currentDataType = 'boundingbox';
            allImages = project[currentDataType];
            currentIndex = 0;

            modalTitle.textContent = project.title;
            updateGalleryImage();
            updateActiveButton();
            updateDots();
            openModal();
        });
    });

    // Data mode buttons
    modal.addEventListener('click', (event) => {
        if (event.target.classList.contains('mode-btn')) {
            const type = event.target.getAttribute('data-mode');
            if (!projectImages[currentProject][type] || projectImages[currentProject][type].length === 0) return;

            currentDataType = type;
            allImages = projectImages[currentProject][currentDataType];
            updateGalleryImage();
            updateActiveButton();
            updateDots();
        }
    });

    // Change data-mode button color 
    function updateActiveButton() {
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.classList.remove('bg-green-400', 'text-black');
            btn.classList.add('bg-black', 'text-white');
        });

        const activeBtn = document.querySelector(`.mode-btn[data-mode="${currentDataType}"]`);
        if (activeBtn) {
            activeBtn.classList.remove('bg-black', 'text-white');
            activeBtn.classList.add('bg-green-400', 'text-black');
        }
    }

    // modal image navigation
    document.getElementById('prev-btn').addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + allImages.length) % allImages.length;
        updateGalleryImage();
        updateDots();
    });
    document.getElementById('next-btn').addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % allImages.length;
        updateGalleryImage();
        updateDots();
    });

    // image index dots
    function updateDots() {
        const dotContainer = document.getElementById('dot-indicators');
        dotContainer.innerHTML = ''; // clear previous dots

        allImages.forEach((_, index) => {
            const dot = document.createElement('span');
            dot.className = `w-3 h-3 rounded-full ${
                index === currentIndex ? 'bg-green-400' : 'bg-gray-400'
            } transition duration-300`;
            dotContainer.appendChild(dot);
        });
    }

    // Close modal
    document.getElementById('close-gallery').addEventListener('click', closeModal);
    

